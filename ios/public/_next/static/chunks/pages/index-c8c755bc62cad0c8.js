(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1087:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(7876),s=n(4232),a=n(553);function o(){let{data:e}=(0,a.useSession)(),[t,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(""),[l,r]=(0,s.useState)(!0);async function c(){r(!0);let e=await fetch("/api/todos");n(await e.json()),r(!1)}async function h(e){if(null==e||e.preventDefault(),!o.trim())return;let t=await fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o.trim()})}),i=await t.json();n(e=>[...e,i]),d("")}async function u(e){let i=t.find(t=>t.id===e);if(!i)return;let s=await fetch("/api/todos",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,completed:!i.completed})}),a=await s.json();n(t=>t.map(t=>t.id===e?a:t))}async function m(e){await fetch("/api/todos?id=".concat(encodeURIComponent(e)),{method:"DELETE"}),n(t=>t.filter(t=>t.id!==e))}return((0,s.useEffect)(()=>{c()},[]),e)?(0,i.jsxs)("div",{style:{maxWidth:720,margin:"2rem auto",padding:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:["Signed in as ",e.user.email]}),(0,i.jsx)("button",{onClick:()=>(0,a.signOut)(),children:"Sign out"})]}),(0,i.jsx)("h1",{children:"Simple To-Do"}),(0,i.jsxs)("form",{onSubmit:h,style:{marginBottom:"1rem"},children:[(0,i.jsx)("input",{value:o,onChange:e=>d(e.target.value),placeholder:"New task",style:{padding:"0.5rem",width:"70%"}}),(0,i.jsx)("button",{type:"submit",style:{padding:"0.5rem",marginLeft:"0.5rem"},children:"Add"})]}),l?(0,i.jsx)("p",{children:"Loadingâ€¦"}):(0,i.jsx)("ul",{style:{listStyle:"none",paddingLeft:0},children:t.map(e=>(0,i.jsxs)("li",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,i.jsxs)("label",{style:{flex:1,textDecoration:e.completed?"line-through":"none"},children:[(0,i.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>u(e.id)})," ",e.content]}),(0,i.jsx)("button",{onClick:()=>m(e.id),style:{marginLeft:8},children:"Delete"})]},e.id))})]}):(0,i.jsxs)("div",{style:{maxWidth:720,margin:"2rem auto",padding:"1rem"},children:[(0,i.jsx)("h1",{children:"Please sign in"}),(0,i.jsx)("button",{onClick:()=>(0,a.signIn)(),children:"Sign in"})]})}},2936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1087)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);